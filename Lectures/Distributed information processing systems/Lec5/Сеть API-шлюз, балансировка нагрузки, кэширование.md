1. API-шлюз
	Представителем шлюза является nginx, то есть прослойка между клиентами и приложением.
	Он проксирует запросы от клиентов к бекэнду и наоборот.
	Nginx может:
	1. Шлюз смотрит URL-адрес и отправляет по нему запросы, то есть routing-функция.
	2. Также шлюз может преобразовывает протоколы (из одного в другой протокол, например из REST в gRPC).
	3. Шлюз проводить дешифровку HTTPS-пакетов и проверяет их сертификаты, а на бекэнд передаёт уже в HTTP.
	4. Может авторизовать пользователей. В заголовке посмотрит, но в body не полезет.
	5. Поддерживает функцию ретраев.
2. Балансировка нагрузки (LB - load balancer)
	Балансер, API-шлюз, Nginx в данном случае синонимы.
	1. Самое очевидная балансировка - Round Robbin. Просто гоняет по кругу на каждый под по запросы от пользователя. Хорош если все сервера +- по железу одинаковые
	2. Есть ещё взвешенный Round Robbin. Тоже самое, но у подов есть приоритет.
	3. Sticky Session - пользователей из определённой локации по территории отправляют в конкретный сервер.
3. Кэширование
	Позволяет существенно ускорить получения доступа к данным. Кэш - хранилище вида ключ - значение ограниченное в размере.
	3.1 Задачи кэширования:
		1. Уменьшение времени отклика сервисов (не ходим в базу - идём в кэш)
		2. Снижение нагрузки с поставщиков данных (не ходим за данными в другие сервисы - идём в кэш)
		3. Переиспользование ранее вычисленных данных (не вычисляем данные повторно - идём в кэш)
		4. Стабилизация работы при отказе поставщика данных (другой сервис или база отвалились - берём данные из кэша)
	3.2 Внутреннее и внешнее кэширование
		Внутреннее кэширование - кэширует на том сервере на котором используем (просто кэш в ОЗУ).
		Легко реализовать, но сложно увеличивать.
		Внешнее кэширование - кэш расположен на отдельном сервере (Redis), кэш один для всех экземпляров сервиса. 
		Выделяем отдельный сервер для кэширования в ОЗУ или редко в HDD.
		Просто хранить много данных, просто масштабировать, но он медленнее чем внутренний кэш.
	3.3 Стратегии замещения данных в кэше
		Time to Live - время до выкидывания данных из кэша
		Алгоритмы:
			1. FIFO
			2. LIFO
			3. LRU - выкидываем того, к кому дольше всего не было обращений (то есть давно не читали).
			4. MRU - выкидываем из кэша к кому недавно обращались
	![[Pasted image 20251031134847.png]]
	